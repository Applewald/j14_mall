<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cskaoyan.mall.mapper.RoleMapper">

    <!--查询，模糊查询-->
    <resultMap id="selectRole" type="com.cskaoyan.mall.bean.role.Role">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="desc" property="desc"/>
        <result column="add_time" property="addTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="enabled" property="enabled" typeHandler="com.cskaoyan.mall.typeHandler.BooleanTypeHandler"/>
        <result column="deleted" property="deleted" typeHandler="com.cskaoyan.mall.typeHandler.BooleanTypeHandler"/>
    </resultMap>
    <select id="selectAllRole" resultMap="selectRole">
        select `id`, `name`, `desc` , `enabled`, `add_time`, `update_time`, `deleted`
        from cskaoyan_mall_role
        where deleted != 1
        <if test="name != null and name != '' ">
            and `name` like CONCAT('%',#{name},'%')
        </if>
        order by #{sort} #{order}
    </select>

    <!--按名字查询-->
    <select id="selectByName" resultMap="selectRole">
        select `id`, `name`, `desc` , `enabled`, `add_time`, `update_time`, `deleted`
        from cskaoyan_mall_role
        where `name` = #{name}
    </select>

    <!--添加-->
    <insert id="insert" >
        insert into cskaoyan_mall_role (`name`, `desc`, add_time, update_time)
        values (#{role.name}, #{role.desc}, now(), now())
    </insert>


    <!--adminOptions-->
    <resultMap id="AdminOp" type="com.cskaoyan.mall.bean.admin.AdminOptions">
        <result column="id" property="value"/>
        <result column="name" property="label"/>
    </resultMap>
    <select id="selectAllRoleIdAndName" resultMap="AdminOp">
        select `id`, `name`
        from cskaoyan_mall_role
        where deleted != 1
    </select>

</mapper>